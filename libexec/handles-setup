#!/bin/bash
# Usage: handles setup
# Summary: Set up the project to run for the first time

set -e

cd "$(git rev-parse --show-toplevel 2>/dev/null)"
test -f "bin/setup" && exec bin/setup

handles-bootstrap

if [ -f "Makefile" ] && (make -q setup &>/dev/null; test $? -eq 1); then
  exec make setup
elif [ -f "Rakefile" ] && bundle exec rake -T setup &>/dev/null; then
  exec bundle exec rake setup
fi

if [ -f ".env.example" ]; then
  echo "==> Copying environment fileâ€¦"
  cp .env.example .env
fi

echo "==> Your project is now ready to go!"
